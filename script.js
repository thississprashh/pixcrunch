// Language translations
const translations = {
    en: {
        title: "PixCrunch",
        subtitle: "Reduce your image sizes with ease.",
        chooseImage: "Choose the image",
        dragDrop: "or drag and drop here",
        compressImage: "Compress the image",
        reset: "Clear",
        status: "",
        compressing: "Compressing...",
        compressionComplete: "Compression complete!",
        error: "Error compressing images.",
        original: "Original",
        compressed: "Compressed",
        download: "Download",
        footer: "¬© 2025 PixCrunch. All rights reserved.",
        compressionLevel: "Compression Level:",
        preview: "Preview",
        previewTitle: "Preview",
        outputFormat: "Output Format:"
    },
    hi: {
        title: "PixCrunch",
        subtitle: "‡§Ö‡§™‡§®‡•Ä ‡§õ‡§µ‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§Ü‡§ï‡§æ‡§∞ ‡§Ü‡§∏‡§æ‡§®‡•Ä ‡§∏‡•á ‡§ï‡§Æ ‡§ï‡§∞‡•á‡§Ç",
        chooseImage: "‡§õ‡§µ‡§ø ‡§ö‡•Å‡§®‡•á‡§Ç",
        dragDrop: "‡§Ø‡§æ ‡§Ø‡§π‡§æ‡§Å ‡§ñ‡•Ä‡§Ç‡§ö‡•á‡§Ç ‡§î‡§∞ ‡§õ‡•ã‡§°‡§º‡•á‡§Ç",
        compressImage: "‡§õ‡§µ‡§ø ‡§∏‡§Ç‡§™‡•Ä‡§°‡§º‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç",
        reset: "‡§∞‡•Ä‡§∏‡•á‡§ü",
        status: "",
        compressing: "‡§∏‡§Ç‡§™‡•Ä‡§°‡§º‡§® ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...",
        compressionComplete: "‡§∏‡§Ç‡§™‡•Ä‡§°‡§º‡§® ‡§™‡•Ç‡§∞‡§æ ‡§π‡•Å‡§Ü!",
        error: "‡§õ‡§µ‡§ø‡§Ø‡§æ‡§Å ‡§∏‡§Ç‡§™‡•Ä‡§°‡§º‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§",
        original: "‡§Æ‡•Ç‡§≤",
        compressed: "‡§∏‡§Ç‡§™‡•Ä‡§°‡§º‡§ø‡§§",
        download: "‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§°",
        footer: "¬© 2025 PixCrunch‡•§ ‡§∏‡§≠‡•Ä ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§‡•§",
        compressionLevel: "‡§∏‡§Ç‡§™‡•Ä‡§°‡§º‡§® ‡§∏‡•ç‡§§‡§∞:",
        preview: "‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§µ‡§≤‡•ã‡§ï‡§®",
        previewTitle: "‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§µ‡§≤‡•ã‡§ï‡§®",
        outputFormat: "‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™:"
    },
    fr: {
        title: "PixCrunch",
        subtitle: "R√©duisez facilement la taille de vos images",
        chooseImage: "Choisir l'image",
        dragDrop: "ou glisser-d√©poser ici",
        compressImage: "Compresser l'image",
        reset: "R√©initialiser",
        status: "",
        compressing: "Compression en cours...",
        compressionComplete: "Compression termin√©e !",
        error: "Erreur lors de la compression des images.",
        original: "Original",
        compressed: "Compress√©",
        download: "T√©l√©charger",
        footer: "¬© 2025 PixCrunch. Tous droits r√©serv√©s.",
        compressionLevel: "Niveau de compression :",
        preview: "Aper√ßu",
        previewTitle: "Aper√ßu",
        outputFormat: "Format de sortie :"
    },
    es: {
        title: "PixCrunch",
        subtitle: "Reduce el tama√±o de tus im√°genes f√°cilmente",
        chooseImage: "Elegir la imagen",
        dragDrop: "o arrastrar y soltar aqu√≠",
        compressImage: "Comprimir la imagen",
        reset: "Restablecer",
        status: "",
        compressing: "Comprimiendo...",
        compressionComplete: "¬°Compresi√≥n completada!",
        error: "Error al comprimir las im√°genes.",
        original: "Original",
        compressed: "Comprimido",
        download: "Descargar",
        footer: "¬© 2025 PixCrunch. Todos los derechos reservados.",
        compressionLevel: "Nivel de compresi√≥n:",
        preview: "Vista previa",
        previewTitle: "Vista previa",
        outputFormat: "Formato de salida:"
    },
    ru: {
        title: "PixCrunch",
        subtitle: "–£–º–µ–Ω—å—à–∞–π—Ç–µ —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ª–µ–≥–∫–æ—Å—Ç—å—é",
        chooseImage: "–í—ã–±—Ä–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ",
        dragDrop: "–∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å—é–¥–∞",
        compressImage: "–°–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ",
        reset: "–°–±—Ä–æ—Å–∏—Ç—å",
        status: "",
        compressing: "–°–∂–∞—Ç–∏–µ...",
        compressionComplete: "–°–∂–∞—Ç–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!",
        error: "–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∂–∞—Ç–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.",
        original: "–û—Ä–∏–≥–∏–Ω–∞–ª",
        compressed: "–°–∂–∞—Ç—ã–π",
        download: "–°–∫–∞—á–∞—Ç—å",
        footer: "¬© 2025 PixCrunch. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.",
        compressionLevel: "–£—Ä–æ–≤–µ–Ω—å —Å–∂–∞—Ç–∏—è:",
        preview: "–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä",
        previewTitle: "–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä",
        outputFormat: "–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞:"
    },
    pt: {
        title: "PixCrunch",
        subtitle: "Reduza o tamanho das suas imagens com facilidade",
        chooseImage: "Escolher a imagem",
        dragDrop: "ou arrastar e soltar aqui",
        compressImage: "Comprimir a imagem",
        reset: "Redefinir",
        status: "",
        compressing: "Comprimindo...",
        compressionComplete: "Compress√£o conclu√≠da!",
        error: "Erro ao comprimir as imagens.",
        original: "Original",
        compressed: "Comprimido",
        download: "Baixar",
        footer: "¬© 2025 PixCrunch. Todos os direitos reservados.",
        compressionLevel: "N√≠vel de compress√£o:",
        preview: "Pr√©-visualizar",
        previewTitle: "Pr√©-visualiza√ß√£o",
        outputFormat: "Formato de sa√≠da:"
    },
    it: {
        title: "PixCrunch",
        subtitle: "Riduci facilmente le dimensioni delle tue immagini",
        chooseImage: "Scegli l'immagine",
        dragDrop: "o trascina e rilascia qui",
        compressImage: "Comprimi l'immagine",
        reset: "Ripristina",
        status: "",
        compressing: "Compressione in corso...",
        compressionComplete: "Compressione completata!",
        error: "Errore durante la compressione delle immagini.",
        original: "Originale",
        compressed: "Compresso",
        download: "Scarica",
        footer: "¬© 2025 PixCrunch. Tutti i diritti riservati.",
        compressionLevel: "Livello di compressione:",
        preview: "Anteprima",
        previewTitle: "Anteprima",
        outputFormat: "Formato di output:"
    },
    id: {
        title: "PixCrunch",
        subtitle: "Kurangi ukuran gambar Anda dengan mudah",
        chooseImage: "Pilih gambar",
        dragDrop: "atau seret dan lepas di sini",
        compressImage: "Kompres gambar",
        reset: "Setel ulang",
        status: "",
        compressing: "Mengompresi...",
        compressionComplete: "Kompresi selesai!",
        error: "Kesalahan saat mengompresi gambar.",
        original: "Asli",
        compressed: "Terkompresi",
        download: "Unduh",
        footer: "¬© 2025 PixCrunch. Hak cipta dilindungi.",
        compressionLevel: "Tingkat kompresi:",
        preview: "Pratinjau",
        previewTitle: "Pratinjau",
        outputFormat: "Format keluaran:"
    },
    pl: {
        title: "PixCrunch",
        subtitle: "Zmniejszaj rozmiar swoich zdjƒôƒá z ≈Çatwo≈õciƒÖ",
        chooseImage: "Wybierz zdjƒôcie",
        dragDrop: "lub przeciƒÖgnij i upu≈õƒá tutaj",
        compressImage: "Kompresuj zdjƒôcie",
        reset: "Resetuj",
        status: "",
        compressing: "Kompresowanie...",
        compressionComplete: "Kompresja zako≈Ñczona!",
        error: "B≈ÇƒÖd podczas kompresji zdjƒôƒá.",
        original: "Orygina≈Ç",
        compressed: "Skompresowany",
        download: "Pobierz",
        footer: "¬© 2025 PixCrunch. Wszystkie prawa zastrze≈ºone.",
        compressionLevel: "Poziom kompresji:",
        preview: "PodglƒÖd",
        previewTitle: "PodglƒÖd",
        outputFormat: "Format wyj≈õciowy:"
    },
    th: {
        title: "PixCrunch",
        subtitle: "‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏á‡πà‡∏≤‡∏¢‡∏î‡∏≤‡∏¢",
        chooseImage: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏û",
        dragDrop: "‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà",
        compressImage: "‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î‡∏†‡∏≤‡∏û",
        reset: "‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï",
        status: "",
        compressing: "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î...",
        compressionComplete: "‡∏Å‡∏≤‡∏£‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!",
        error: "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏ì‡∏∞‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î‡∏†‡∏≤‡∏û",
        original: "‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö",
        compressed: "‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î‡πÅ‡∏•‡πâ‡∏ß",
        download: "‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î",
        footer: "¬© 2025 PixCrunch. ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",
        compressionLevel: "‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î:",
        preview: "‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á",
        previewTitle: "‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á",
        outputFormat: "‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:"
    },
    ko: {
        title: "PixCrunch",
        subtitle: "Ïù¥ÎØ∏ÏßÄ ÌÅ¨Í∏∞Î•º ÏâΩÍ≤å Ï§ÑÏù¥ÏÑ∏Ïöî",
        chooseImage: "Ïù¥ÎØ∏ÏßÄ ÏÑ†ÌÉù",
        dragDrop: "ÎòêÎäî Ïó¨Í∏∞Î°ú ÎìúÎûòÍ∑∏ Ïï§ ÎìúÎ°≠",
        compressImage: "Ïù¥ÎØ∏ÏßÄ ÏïïÏ∂ï",
        reset: "Ï¥àÍ∏∞Ìôî",
        status: "",
        compressing: "ÏïïÏ∂ï Ï§ë...",
        compressionComplete: "ÏïïÏ∂ï ÏôÑÎ£å!",
        error: "Ïù¥ÎØ∏ÏßÄ ÏïïÏ∂ï Ï§ë Ïò§Î•ò Î∞úÏÉù",
        original: "ÏõêÎ≥∏",
        compressed: "ÏïïÏ∂ïÎê®",
        download: "Îã§Ïö¥Î°úÎìú",
        footer: "¬© 2025 PixCrunch. Î™®Îì† Í∂åÎ¶¨ Î≥¥Ïú†.",
        compressionLevel: "ÏïïÏ∂ï ÏàòÏ§Ä:",
        preview: "ÎØ∏Î¶¨Î≥¥Í∏∞",
        previewTitle: "ÎØ∏Î¶¨Î≥¥Í∏∞",
        outputFormat: "Ï∂úÎ†• ÌòïÏãù:"
    }
};

// Initialize language
let currentLang = 'en';

// DOM elements
const fileInput = document.getElementById('fileInput');
const compressBtn = document.getElementById('compressBtn');
const previewBtn = document.getElementById('previewBtn');
const resetBtn = document.getElementById('resetBtn');
const imageList = document.getElementById('imageList');
const status = document.getElementById('status');
const progress = document.getElementById('progress');
const progressBar = document.querySelector('.progress-bar');
const uploadCard = document.querySelector('.upload-card');
const languageSelect = document.getElementById('languageSelect');
const compressionSlider = document.getElementById('compressionSlider');
const compressionValue = document.getElementById('compressionValue');
const previewArea = document.getElementById('previewArea');
const previewImage = document.getElementById('previewImage');
const previewSize = document.getElementById('previewSize');
const formatSelect = document.getElementById('formatSelect');
const themeToggle = document.getElementById('themeToggle');

let selectedFiles = [];

// Update text based on language
function updateLanguage() {
    document.querySelectorAll('[data-lang]').forEach(element => {
        const key = element.getAttribute('data-lang');
        element.textContent = translations[currentLang][key];
    });
    document.title = `${translations[currentLang].title} - Image Compressor`;
}

// Language change event
languageSelect.addEventListener('change', (e) => {
    currentLang = e.target.value;
    updateLanguage();
    if (selectedFiles.length > 0) {
        displaySelectedImages();
    }
});

// Update compression value display in real-time
compressionSlider.addEventListener('input', () => {
    compressionValue.textContent = `${compressionSlider.value}%`;
});

// File input change - Handles multiple file selection
fileInput.addEventListener('change', () => {
    selectedFiles = Array.from(fileInput.files);
    console.log('Selected files:', selectedFiles.map(file => ({ name: file.name, size: file.size })));
    if (selectedFiles.length === 0) {
        console.warn('No files selected');
        status.textContent = translations[currentLang].error;
        return;
    }
    displaySelectedImages();
    previewArea.classList.add('hidden');
});

// Drag-and-drop events - Supports multiple files
uploadCard.addEventListener('dragover', (e) => {
    e.preventDefault();
    uploadCard.classList.add('dragover');
});

uploadCard.addEventListener('dragleave', () => {
    uploadCard.classList.remove('dragover');
});

uploadCard.addEventListener('drop', (e) => {
    e.preventDefault();
    uploadCard.classList.remove('dragover');
    selectedFiles = Array.from(e.dataTransfer.files);
    console.log('Dropped files:', selectedFiles.map(file => ({ name: file.name, size: file.size })));
    if (selectedFiles.length === 0) {
        console.warn('No files dropped');
        status.textContent = translations[currentLang].error;
        return;
    }
    fileInput.files = e.dataTransfer.files;
    displaySelectedImages();
    previewArea.classList.add('hidden');
});

// Preview button click - Previews the first selected image
previewBtn.addEventListener('click', async () => {
    if (selectedFiles.length === 0) {
        console.warn('No files to preview');
        status.textContent = translations[currentLang].error;
        return;
    }

    console.log(`Previewing first image with quality ${compressionSlider.value} and format ${formatSelect.value}`);
    status.textContent = translations[currentLang].compressing;
    progress.classList.remove('hidden');
    animateProgress();

    const formData = new FormData();
    formData.append('images', selectedFiles[0]);
    formData.append('quality', compressionSlider.value);
    formData.append('format', formatSelect.value);

    try {
        const response = await fetch('/preview', {
            method: 'POST',
            body: formData
        });
        const data = await response.json();
        console.log('Preview response:', data);
        if (!response.ok) {
            throw new Error(data.error || 'Preview failed');
        }
        if (!data.previewImage) {
            throw new Error('No preview image returned');
        }

        previewImage.src = data.previewImage.compressedPath;
        previewSize.textContent = `Estimated Size: ${formatSize(data.previewImage.compressedSize)}`;
        previewArea.classList.remove('hidden');
        status.textContent = '';
        progress.classList.add('hidden');
    } catch (error) {
        console.error('Preview error:', error.message);
        status.textContent = translations[currentLang].error;
        progress.classList.add('hidden');
    }
});

// Compress button click - Compresses all selected images
compressBtn.addEventListener('click', async () => {
    if (selectedFiles.length === 0) {
        console.warn('No files to compress');
        status.textContent = translations[currentLang].error;
        return;
    }
    console.log(`Compressing ${selectedFiles.length} files with quality ${compressionSlider.value} and format ${formatSelect.value}`);
    status.textContent = translations[currentLang].compressing;
    progress.classList.remove('hidden');
    animateProgress();

    const formData = new FormData();
    selectedFiles.forEach((file, index) => {
        formData.append('images', file);
        console.log(`Added file ${index + 1}: ${file.name}`);
    });
    formData.append('quality', compressionSlider.value);
    formData.append('format', formatSelect.value);

    try {
        const response = await fetch('/compress', {
            method: 'POST',
            body: formData
        });
        const data = await response.json();
        console.log('Server response:', data);
        if (!response.ok) {
            throw new Error(data.error || 'Compression failed');
        }
        if (!data.compressedImages || data.compressedImages.length === 0) {
            throw new Error('No compressed images returned');
        }
        displayCompressedImages(data.compressedImages);
        status.textContent = translations[currentLang].compressionComplete;
        progress.classList.add('hidden');
        previewArea.classList.add('hidden');
    } catch (error) {
        console.error('Compression error:', error.message);
        status.textContent = translations[currentLang].error;
        progress.classList.add('hidden');
    }
});

// Reset button click
resetBtn.addEventListener('click', () => {
    fileInput.value = '';
    selectedFiles = [];
    imageList.innerHTML = '';
    status.textContent = translations[currentLang].status;
    progress.classList.add('hidden');
    compressionSlider.value = 50;
    compressionValue.textContent = '50%';
    previewArea.classList.add('hidden');
    formatSelect.value = 'jpeg';
    console.log('Reset completed!');
});

// Display selected images - Shows all selected images in a grid
function displaySelectedImages() {
    imageList.innerHTML = '';
    if (selectedFiles.length === 0) {
        console.warn('No images to display!');
        return;
    }
    selectedFiles.forEach(file => {
        const item = document.createElement('div');
        item.className = 'image-item';
        const img = document.createElement('img');
        img.src = URL.createObjectURL(file);
        const name = document.createElement('p');
        name.textContent = file.name;
        const size = document.createElement('p');
        size.textContent = `${translations[currentLang].original}: ${formatSize(file.size)}`;
        item.appendChild(img);
        item.appendChild(name);
        item.appendChild(size);
        imageList.appendChild(item);
    });
    console.log(`Displayed ${selectedFiles.length} images`);
}

// Display compressed images - Adds compressed sizes and download links for all images
function displayCompressedImages(compressedImages) {
    console.log('Received compressed images:', compressedImages);
    if (!compressedImages || compressedImages.length !== selectedFiles.length) {
        console.error(`Expected ${selectedFiles.length} compressed images, but received ${compressedImages ? compressedImages.length : 0}`);
        status.textContent = translations[currentLang].error;
        return;
    }
    compressedImages.forEach((imgData, index) => {
        const item = imageList.children[index];
        if (!item) {
            console.error(`No item found for index ${index}`);
            return;
        }
        const compressedSize = document.createElement('p');
        compressedSize.textContent = `${translations[currentLang].compressed}: ${formatSize(imgData.compressedSize)}`;
        const downloadBtn = document.createElement('a');
        downloadBtn.href = imgData.compressedPath;
        downloadBtn.download = imgData.compressedName || `${selectedFiles[index].name.split('.')[0]}_compressed.${imgData.format}`;
        downloadBtn.textContent = translations[currentLang].download;
        downloadBtn.className = 'download-btn';
        item.appendChild(compressedSize);
        item.appendChild(downloadBtn);
        console.log(`Added compressed info for ${imgData.originalName}`);
    });
}

// Format file size
function formatSize(bytes) {
    if (bytes < 1024) return bytes + ' bytes';
    else if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
    else return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
}

// Animate progress bar
function animateProgress() {
    let width = 0;
    progressBar.style.width = '0%';
    const totalSteps = Math.max(10, selectedFiles.length * 2);
    const increment = 90 / totalSteps;
    const interval = setInterval(() => {
        if (width >= 90) {
            clearInterval(interval);
            return;
        }
        width += increment;
        progressBar.style.width = `${width}%`;
    }, 200);
}

// Function to toggle theme
function toggleTheme() {
    document.body.classList.toggle('dark-mode');
    const isDarkMode = document.body.classList.contains('dark-mode');
    localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
    themeToggle.textContent = isDarkMode ? '‚òÄÔ∏è' : 'üåô';
}

// Load saved theme on page load
function loadTheme() {
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
        document.body.classList.add('dark-mode');
        themeToggle.textContent = '‚òÄÔ∏è';
    } else {
        themeToggle.textContent = 'üåô';
    }
}

// Theme toggle event listener
themeToggle.addEventListener('click', toggleTheme);

// Initialize language and theme on page load
updateLanguage();
loadTheme();